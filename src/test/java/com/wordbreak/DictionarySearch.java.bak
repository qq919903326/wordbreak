package com.wordbreak;

import com.wordbreak.entity.Dictionary;
import org.junit.Test;

import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;
import java.util.Optional;

public class DictionarySearch {

//    static String dictionary[] = { "a", "aa", "aaa", "aaaa", "aaaaa", "aaaaaaa"};
    static String dictionary[] = { "abc","i", "like", "sam", "sung", "samsung","mobile", "ice","cream", "icecream", "man", "go", "mango"};

    @Test
    public void test(){
        String word = "ilikesamsungmobile";
//        String word = "aaaaaaaaaaaaaaaaaaa";
//        String word = "ilikeicecreamandmango";
//        String word = "ilikeicecreammango";
        search(word);
    }

    public static void main(String[] args) {
        String word = "ilikesamsungmobile";
        search(word).stream().forEach(System.out::println);
    }
    private static List search(String word) {
        return dictionarySearchUtil(word);
    }

    public static List<String> dictionarySearchUtil(String s) {
        LinkedList<String>[] dp = new LinkedList[s.length() + 1];
        LinkedList<String> initial = new LinkedList(){{add("");}};
        dp[0] = initial;
        for (int i = 1; i <= s.length(); i++) {
            LinkedList<String> list = new LinkedList<>();
            for (int j = 0; j < i; j++) {
                String prefix = s.substring(j, i);
                Optional<String> re = dictionaryContains(prefix);
                if (dp[j].size() > 0 && re.isPresent()) {
                    for (String l : dp[j]) {
                        list.add(l + (l.equals("") ? "" : " ") + re.get());
                    }
                }
            }
            dp[i] = list;
        }
        return dp[s.length()];
    }

    private static void dictionarySearchUtil(String word, String result) {
        int length = word.length();
        for (int i = 1; i <= length; i++) {
            String prefix = word.substring(0, i);
            Optional<String> re = dictionaryContains(prefix);
            if (re.isPresent()) {
                if (i == length) {
                    result += re.get();
                    System.out.println(result);
                    return;
                }
                String lestword = word.substring(i, length);
                dictionarySearchUtil(lestword, result + prefix + " ");
            }
        }
    }
    private static Optional dictionaryContains(String prefix) {
        Optional<String> str = Arrays.stream(dictionary).filter(s ->
                s.replaceAll(" +", "").equals(prefix.replaceAll(" +", ""))
        ).findAny();
        return str;
    }

//    public static void main(String[] args) {
//        String word = "ilikeicecreamandmango";
//        ArrayList<String> list = new ArrayList();
//        for(int sub = 0;sub<word.length();sub++){
//            for(int i = sub+1;i<=word.length();i++){
//                list.add(word.substring(sub,i));
//            }
//            if(sub+1 >= word.length()){
//                continue ;
//            }
//            word = word.substring(sub+1,word.length());
//        }
//        System.out.println(list.toString());
//    }
}